# 数据库物理存储

[TOC]

---

**磁盘数据读写时间**：寻道时间+旋转时间+传输时间。

- 最小时间：忽略寻道时间和旋转时间，只看传输时间。
- 最大时间：最大寻道时间(磁头经过所有磁道)+最大旋转时间(旋转一周)+传输时间。
- 平均时间：移动 1/3 磁道的时间 + 旋转半周的时间 + 传输时间。

**降低寻道/旋转延迟的方法：** 同一磁道连续块存储；同一柱面不同磁道并行块存储；不同磁盘并行块存储。

**提高磁盘读写效率和存储可靠性的方法**：RAID 技术：实现并行 + 可靠，所用技术：

- 比特级拆分：一个字节被拆成八个比特位，每个位存储于不同磁盘。
- 块级拆分：一个文件分成多个块，每个块存储于不同磁盘。
- 扇区/块读写校验。
- 磁盘间读写校验。

**文件组织方法：**

- **无序记录文件**（堆文件）：记录无序存储于任意位置，**更新效率高，检索效率低**。频繁增删记录时会造成空间浪费，所以需要 **重组数据库**——通过移走被删除的记录使有效记录连续存放。
- **有序记录文件**：按某属性值的顺序插入新纪录，按排序字段进行检索时，**检索效率高。更新效率低**。增加一条记录是将其 **写入溢出文件中**，而不是 直接写入排序文件。也需要周期性 **重组数据库**——将溢出的文件合并到主文件中，并恢复主文件中的记录顺序。
- **散列文件**：按属性值根据散列函数来计算存放位置，**检索效率和更新效率都有提高。**
- **聚簇文件**：聚簇是指将 **具有相同或相似属性值的记录** 存放于连续的磁盘簇块中；多表聚簇是指将 **若干个相关的表** 存放到一个文件中，提高多表查询速度。

📑 **习题**：

1. **存储表数据为文件**： DBMS既可以将 **若干个“表”的数据存储在一个文件中**，又可以将 **一个“表”的数据存储在多个文件中**。

2. 相同柱面不同盘面的扇区可以一次性读写。
3. 顺序文件的检索效率高；堆文件的更新效率高。
4. **数据库重组** 是指对 **物理存储** 的调整。