# 结构体和共用体

## 结构体

__定义__

```c
// 定义类型
struct student {
    long id;
    char name[10];
    char sex;
};
// 定义该类型的变量
struct  student stu1;
```

也可以在定义结构体类型的同时定义该类型变量：

```c
struct student {
    // ...
} stu1;
```

可以用 `typedef` 为结构体类型取别名：

```c
typedef struct student
{
    // ...
} STUDENT;
```

__结构体变量初始化__

通过 __将成员的初值按顺序置于花括号内__ 来进行初始化。

```c
STUDENT stu2 = {07142698, "mason", "M"};
```

__结构体变量的引用__

1. __不能将结构体变量作为一个整体进行输入输出__，只能对具体的成员进行输入输出操作。

2. __同类型的结构体变量可以进行整体赋值__，`stu2 = stu1`。但并非所有成员都可以用赋值运算符来赋值，对于 __字符数组类型的成员__ 赋值时，要使用 `strcpy()`，因为 `stu1.name` 是一个 __字符数组的首地址，是一个常量，不能被赋值__。


__结构体变量所占空间大小__

由于 __内存对齐__ 需要，所占空间可能大于各个成员所占空间之和。对齐规则是：每个成员的起始地址是自己所占空间的倍数。

__结构体数组__

```c
STUDENT stu[30] = {
    {0001, "mason", "M"},
    // ...
};
printf("%s\n", stu[0].name);
```

__结构体指针__

指向结构体变量的指针：

```c
STUDENT *pt;
pt = &stu1;
pt->name;
```

指向结构体数组的指针：

```c
// stu 为结构体数组
STUDENT *pt = stu;
// 相当于
STUDENT *pt = &stu[0];
```

pt 指向 stu[0]，pt+1 指向 stu[1]。

__结构体变量作为函数参数__

结构体变量作为函数实参，是 __传值调用__，在函数内对形参修改不会影响到实参。

用 __结构体指针__ 或 __结构体数组__ 作为函数实参，__实际上传递的是结构体的地址__，这种方式不仅能修改实参，效率也更高。

---

## 共用体

共用体用来定义几个互斥的成员，这些成员共用同样的空间，从同一位置开始。所以共用体的大小取决于最大的成员。

共用体的定义方法和结构体一样，只是关键字为 `union`。

---

## 枚举类型

枚举类型描述的是一组整型值的集合使用枚举的目的是 __提高可读性__。

```c
enum response {no, yes, none};
enum response answer;
if(answer==yes) { ... }
```

默认情况下，枚举中的定义的值从 0 开始，依次增 1.这里 no 的值为 0，yes 为 1.

> #### Note::
> 
> 枚举常量的值是 __整型__ 的，而不是字符串类型。

也可以在定义时明确给各个枚举常量赋值：

```c
enum response {no = -1,yes = 1};
```